const{components:c}=window.enmity;c.Alert,c.Button,c.FlatList;const Oe=c.Image;c.ImageBackground,c.KeyboardAvoidingView,c.Modal,c.Pressable,c.RefreshControl;const pt=c.ScrollView;c.SectionList,c.StatusBar,c.StyleSheet,c.Switch;const S=c.Text;c.TextInput,c.TouchableHighlight;const x=c.TouchableOpacity;c.TouchableWithoutFeedback,c.Touchable;const T=c.View;c.VirtualizedList,c.Form,c.FormArrow,c.FormCTA,c.FormCTAButton,c.FormCardSection,c.FormCheckbox;const z=c.FormDivider;c.FormHint,c.FormIcon,c.FormInput,c.FormLabel,c.FormRadio;const d=c.FormRow;c.FormSection,c.FormSelect,c.FormSubLabel;const ue=c.FormSwitch;c.FormTernaryCheckBox,c.FormText,c.FormTextColors,c.FormTextSizes;function wt(e){window.enmity.plugins.registerPlugin(e)}const O={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function Q(...e){return window.enmity.modules.bulk(...e)}function Ve(...e){return window.enmity.modules.getByProps(...e)}function Ue(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const u=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const Ye=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars;const G=window.enmity.modules.common.Native,t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher;const L=window.enmity.modules.common.Storage,E=window.enmity.modules.common.Toasts,V=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token;const Ge=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const U=window.enmity.modules.common.Navigation,vt=window.enmity.modules.common.NavigationNative,qe=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const M=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function Et(e){return window.enmity.patcher.create(e)}var s="Dislate",q="1.2.1",kt="Translates text into a desired language.",He="stable",St=[{name:"Acquite <3",id:"581573474296791211",profile:"https://github.com/acquitelol/"}],A={download:"https://raw.githubusercontent.com/acquitelol/dislate/main/dist/Dislate.js",repo:"https://github.com/acquitelol/dislate",build:"patch-1.8.2"},Tt="#ff1f84",f={name:s,version:q,description:kt,release:He,authors:St,plugin:A,color:Tt};function B(e,n,a){window.enmity.settings.set(e,n,a)}function p(e,n,a){return window.enmity.settings.get(e,n,a)}function P(e,n,a){return window.enmity.settings.getBoolean(e,n,a)}var $t=["auto","aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh-cn","zh-tw","zu"],We={auto:"auto",aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",cha:"ch",che:"ce",chi:"zh",chis:"zh-cn",chit:"zh-tw",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cze:"cs",dan:"da",div:"dv",dut:"nl",dzo:"dz",eng:"en",epo:"eo",est:"et",ewe:"ee",fao:"fo",fij:"fj",fin:"fi",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mlg:"mg",mlt:"mt",mon:"mn",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zul:"zu"},F={detect:"auto",afar:"aa",abkhazian:"ab",afrikaans:"af",akan:"ak",albanian:"sq",amharic:"am",arabic:"ar",aragonese:"an",armenian:"hy",assamese:"as",avaric:"av",avestan:"ae",aymara:"ay",azerbaijani:"az",bashkir:"ba",bambara:"bm",basque:"eu",belarusian:"be",bengali:"bn","bihari languages":"bh",bislama:"bi",tibetan:"bo",bosnian:"bs",breton:"br",bulgarian:"bg",burmese:"my",catalan:"ca",valencian:"ca",czech:"cs",chamorro:"ch",chechen:"ce",chinese_simplified:"zh-cn",chinese_traditional:"zh-tw",church_slavic:"cu",old_slavonic:"cu",church_slavonic:"cu",old_bulgarian:"cu",old_church_slavonic:"cu",chuvash:"cv",cornish:"kw",corsican:"co",cree:"cr",welsh:"cy",danish:"da",german:"de",divehi:"dv",dhivehi:"dv",maldivian:"dv",dutch:"nl",flemish:"nl",dzongkha:"dz",greek:"el",english:"en",esperanto:"eo",estonian:"et",ewe:"ee",faroese:"fo",persian:"fa",fijian:"fj",finnish:"fi",french:"fr",western_frisian:"fy",fulah:"ff",georgian:"ka",gaelic:"gd",scottish_gaelic:"gd",irish:"ga",galician:"gl",manx:"gv",guarani:"gn",gujarati:"gu",haitian:"ht",haitian_creole:"ht",hausa:"ha",hebrew:"he",herero:"hz",hindi:"hi",hiri_motu:"ho",croatian:"hr",hungarian:"hu",igbo:"ig",icelandic:"is",ido:"io",sichuan_yi:"ii",nuosu:"ii",inuktitut:"iu",interlingue:"ie",occidental:"ie",interlingua:"ia",indonesian:"id",inupiaq:"ik",italian:"it",javanese:"jv",japanese:"ja",kalaallisut:"kl",greenlandic:"kl",kannada:"kn",kashmiri:"ks",kanuri:"kr",kazakh:"kk",central_khmer:"km",kikuyu:"ki",gikuyu:"ki",kinyarwanda:"rw",kirghiz:"ky",kyrgyz:"ky",komi:"kv",kongo:"kg",korean:"ko",kuanyama:"kj",kwanyama:"kj",kurdish:"ku",lao:"lo",latin:"la",latvian:"lv",limburgan:"li",limburger:"li",limburgish:"li",lingala:"ln",lithuanian:"lt",luxembourgish:"lb",letzeburgesch:"lb","luba-katanga":"lu",ganda:"lg",macedonian:"mk",marshallese:"mh",malayalam:"ml",maori:"mi",marathi:"mr",malay:"ms",malagasy:"mg",maltese:"mt",mongolian:"mn",nauru:"na",navajo:"nv",navaho:"nv",south_ndebele:"nr",north_ndebele:"nd",ndonga:"ng",nepali:"ne",norwegian_nynorsk:"nn",norwegian_bokm\u00E5l:"nb",norwegian:"no",chichewa:"ny",chewa:"ny",nyanja:"ny",occitan:"oc",ojibwa:"oj",oriya:"or",oromo:"om",ossetian:"os",ossetic:"os",panjabi:"pa",punjabi:"pa",pali:"pi",polish:"pl",portuguese:"pt",pushto:"ps",pashto:"ps",quechua:"qu",romansh:"rm",romanian:"ro",moldavian:"ro",moldovan:"ro",rundi:"rn",russian:"ru",sango:"sg",sanskrit:"sa",sinhala:"si",sinhalese:"si",slovak:"sk",slovenian:"sl",northern_sami:"se",samoan:"sm",shona:"sn",sindhi:"sd",somali:"so","sotho, Southern":"st",spanish:"es",castilian:"es",sardinian:"sc",serbian:"sr",swati:"ss",sundanese:"su",swahili:"sw",swedish:"sv",tahitian:"ty",tamil:"ta",tatar:"tt",telugu:"te",tajik:"tg",tagalog:"tl",thai:"th",tigrinya:"ti",tonga:"to",tswana:"tn",tsonga:"ts",turkmen:"tk",turkish:"tr",twi:"tw",uighur:"ug",uyghur:"ug",ukrainian:"uk",urdu:"ur",uzbek:"uz",venda:"ve",vietnamese:"vi",volap\u00FCk:"vo",walloon:"wa",wolof:"wo",xhosa:"xh",yiddish:"yi",yoruba:"yo",zhuang:"za",chuang:"za",zulu:"zu"},de=e=>{if(typeof e!="string")throw new Error(`The "language" must be a string, received ${typeof e}`);if(e.length>100)throw new Error(`The "language" is too long at ${e.length} characters`);if(e=e.toLowerCase(),e=F[e]||We[e]||e,!$t.includes(e))throw new Error(`The language "${e}" is not part of the ISO 639-1`);return e};const Dt="https://translate.googleapis.com/translate_a/single";var It={fetch:({from:e,to:n,text:a})=>[`${Dt}?client=gtx&sl=${e}&tl=${n}&dt=t&q=${encodeURI(a)}`],parse:e=>e.json().then(n=>{if(n=n&&n[0]&&n[0][0]&&n[0].map(a=>a[0]).join(""),!n)throw new Error("Translation not found");return n})},Lt={google:It};if(typeof fetch=="undefined")try{global.fetch=require("node-fetch")}catch{console.warn("Please make sure node-fetch is available")}const Z=function(e={}){if(!(this instanceof Z))return new Z(e);const n={from:"auto",to:"en",languages:de,engines:Lt,engine:"google"},a=(i,o={})=>{typeof o=="string"&&(o={to:o}),o.text=i,o.from=de(o.from||a.from),o.to=de(o.to||a.to),o.engines=o.engines||{},o.engine=o.engine||a.engine,o.url=o.url||a.url,o.id=o.id||`${o.url}:${o.from}:${o.to}:${o.engine}:${o.text}`;const l=o.engines[o.engine]||a.engines[o.engine];if(o.to===o.from)return Promise.resolve(o.text);const r=l.fetch(o);return fetch(...r).then(l.parse)};for(let i in n)a[i]=typeof e[i]=="undefined"?n[i]:e[i];return a},Ke=new Z;Ke.Translate=Z;async function _t(e,{fromLang:n="detect",toLang:a="english"},i){return i?e:await Ke(e,{from:F[n],to:F[a]})}var he={string:_t},$=(e,n,a,i,o)=>{try{return e(...n)}catch(l){console.warn(`[${a}] The following error happened when trying to ${i} ${o!=null?o:"unspecificied label"}: ${l}`);return}};const xt=(e,n,a)=>$(()=>{if(e){for(let i=0;i<e.length;i++)if(n(e[i],i,n))return e[i]}},[e,n],s,"find an item at",a),fe=(e,n,a,i)=>$(()=>{if(e){e.length++,a++;for(let o=e.length-1;o>=a;o--)e[o]=e[o-1];return e[a-1]=n,e.length}},[e,n,a],s,"insert an item at",i),Ct=(e,n,a)=>$(()=>{let i=[];for(let o=0;o<e.length;o++)n(e[o],o,e)&&fe(i,e[o],i.length,"filtering an array");return i},[e,n],s,"filtering an array at",a),Rt=(e,n,a)=>{$(()=>{for(let i=0;i<e.length;i++)n(e[i],i,e)},[e,n],s,"loop through an array at",a)},Pt=(e,n,a)=>$(()=>{let i=[];for(let o=0;o<e.length;o++)fe(i,n(e[o],o,e),i.length);return i},[e,n],s,"map an array at",a);var h={filterItem:Ct,findItem:xt,forItem:Rt,mapItem:Pt,insertItem:fe};const Ft=e=>h.mapItem(e.split("_"),n=>n[0].toUpperCase()+n.slice(1)).join(" "),Nt=(e,n)=>$(()=>{let a=h.mapItem(e.split(`
`),(i,o)=>{if(i!="")return`"${i.replaceAll(":",'":"').replace(" ","")}"${o==e.split(`
`).length-1?"":","}`},"formatting object");return a[0]=`{${a[0]}`,a[a.length-1]=`${a[a.length-1]}}`,a.join("")},[e],s,"formatting object at",n),Mt=(e,n)=>$(()=>{const a={};return h.forItem(Object.keys(e),i=>{Object.assign(a,{[e[i]]:i})},"reversing object"),a},[e],s,"reversing object at",n);var I={string:Ft,object:Nt,reverse:Mt};async function At(e,n){await $(async function(){var a;e.type==="storage"?await L.setItem(e.name,e.content):B(s,e.name,e.content);const i=(a=await L.getItem("dislate_store_state"))!=null?a:[];h.findItem(i,o=>o.name===e.name,"finding existing label in store state")||i.push(e),await L.setItem("dislate_store_state",JSON.stringify(i))},[e],s,"storing an item in plugin file or storage at",n)}var ye={item:At};async function Xe(e){return await $(async function(){const n=await L.getItem("device_list");if(n)return JSON.parse(n);const a=(await Ge.get("https://gist.githubusercontent.com/adamawolf/3048717/raw/1ee7e1a93dff9416f6ff34dd36b0ffbad9b956e9/Apple_mobile_device_types.txt")).text,i=I.object(a,"fetching device list");return await ye.item({name:"device_list",content:i,type:"storage"},"storing device list in storage"),JSON.parse(await L.getItem("device_list"))},[],s,"get the device list",e)}async function Bt(e){await $(async function(){let n=G.DCDDeviceManager.device,a=await Xe();if(!n.includes("iPhone"))return;n=n.replace("iPhone","").replace(",",".");const i=parseFloat(n);async function o(){await L.getItem("dislate_incompatible_dialog")!=null||V.show({title:"Incompatible iPhone",body:`Please note that you're on an${a[G.DCDDeviceManager.device]}.
Some features of ${s} may behave in an unexpected manner.`,confirmText:"I understand",onConfirm:await ye.item({name:"dislate_incompatible_dialog",content:"never show again until cleared",type:"storage"},"storing incompatible dialog to storage")})}(i<10.6&&i!=10.3||i==14.6||i==12.8)&&await o()},[],s,"checking if device is compatible",e)}var Je={getDeviceList:Xe,isCompatibleDevice:Bt};function b(e){return window.enmity.assets.getIDByName(e)}var g={Translate:b("img_nitro_star"),Revert:b("ic_highlight"),Debug:b("debug"),Retry:b("ic_message_retry"),Failed:b("Small"),Cancel:b("ic_megaphone_nsfw_16px"),Delete:b("ic_message_delete"),Copy:b("toast_copy_link"),Open:b("ic_leave_stage"),Clipboard:b("pending-alert"),Add:b("ic_add_perk_24px"),Clock:b("clock"),Settings:{Toasts:{Context:b("toast_image_saved"),Settings:b("ic_selection_checked_24px"),Failed:b("ic_close_circle_24px")},TranslateFrom:b("ic_raised_hand_list"),TranslateTo:b("ic_activity_24px"),Debug:b("ic_rulebook_16px"),Initial:b("coffee"),Update:b("ic_upload"),Locale:b("ic_locale_24px")}};async function Qe(){const e=await Je.getDeviceList();return{"Plugin Version":q,"Plugin Build":A.build.split("-")[1],"Release Channel":He,"Discord Version":G.InfoDictionaryManager.Version,"Discord Build":G.InfoDictionaryManager.Build,"Software Version":G.DCDDeviceManager.systemVersion,Device:e[G.DCDDeviceManager.device]}}async function Ze(e,n){return await $(async function(){let a=[`**[${s}] Debug Information**`];const i=await Qe();return h.forItem(e,o=>{i[o]&&h.insertItem(a,`> **${o}**: ${i[o]}`,a.length,"pushing to debug argument array")},"looping through debug options"),a.join(`
`)},[e],s,"creating debug info at",n)}async function jt(e,{channelId:n,channelName:a},i,o){await $(async function(){U.pop(),Ye.sendMessage(n,{content:await Ze(e)}),E.open({content:`Sent ${i} log in #${a}.`,source:g.Settings.Toasts.Settings})},[e,i],s,"sending debug log at",o)}var C={fetchDebugArguments:Qe,debugInfo:Ze,sendDebugLog:jt};const zt={messageSpoofer:"69",copyEmbed:"1337",invisChat:"420",cutMessage:"512",dislate:"1002"},Ot={shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.1,shadowRadius:4.65,elevation:8},Vt=(e,n)=>{E.open({content:n=="clipboard"?`Copied ${e} to clipboard.`:e,source:n=="clipboard"?g.Clipboard:g.Settings.Initial})},Ut=(e,n,a,i=186,o)=>$(()=>{let l=e.replace("#","");const r=(_,N,J)=>parseInt(_.substring(N[0],N[1]),J),m=r(l,[0,2],16),w=r(l,[2,4],16),k=r(l,[4,6],16);return(m+w+k)/(255*3)>i?a:n},[e,n,a,i],s,"checking if color should be light or dark at",o);var y={externalPlugins:zt,shadow:Ot,displayToast:Vt,filterColor:Ut};const{native:K}=window.enmity;function Yt(){K.reload()}K.version,K.build,K.device,K.version;async function Gt(){await $(async function(){const e=`${A.download}?${Math.floor(Math.random()*1001)}.js`,n=await(await Ge.get(e)).text,a=n.match(/\d\.\d\.\d+/g)[0],i=n.match(/patch-\d\.\d\.\d+/g)[0];return!a||!i?pe(s,[q,A.build]):a!=q?be(e,a,"version"):i!=A.build?be(e,i.split("-")[1],"build"):pe(s,[q,A.build])},[A],s,"checking if latest version at","the async check for updates callback")}const be=(e,n,a)=>{V.show({title:"Update found",body:`A newer ${a} is available for ${s}. ${a=="build"?`
The version will remain at ${q}, but the build will update to ${n}.`:""}
Would you like to install ${a} \`${n}\` now?`,confirmText:"Update",cancelText:"Not now",onConfirm:()=>et(e,n,a)})},pe=(e,[n,a])=>{console.log(`[${e}] Plugin is on the latest update, which is version ${n} and build ${a}`),V.show({title:"Already on latest",body:`${e} is already updated to the latest version.
Version: \`${n}\`
Build: \`${a.split("-")[1]}\``,confirmText:"Okay"})};async function et(e,n,a){await $(async function(){window.enmity.plugins.installPlugin(e,({data:i})=>{i=="installed_plugin"||i=="overridden_plugin"?V.show({title:`Updated ${s}`,body:`Successfully updated to ${a} \`${n}\`. 
Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Not now",onConfirm:()=>Yt()}):console.log(`[Dislate] Plugin failed to update to ${a} ${n}.`)})},[e,n,a],s,"installing plugin at","new version available")}var qt={checkForUpdates:Gt,showUpdateDialog:be,noUpdates:pe,installPlugin:et},tt;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(tt||(tt={}));var ee;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(ee||(ee={}));var te;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(te||(te={}));var nt;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(nt||(nt={}));var X;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(X||(X={}));var at;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(at||(at={}));const ne=window.enmity.modules.common.Components.General.Animated;var Ht=({option:e,channelId:n,channelName:a,debugOptions:i})=>{const[o,l]=t.useState(P(s,e,!1)),r=M.createThemedStyleSheet({icon:{color:u.ThemeColorMap.INTERACTIVE_NORMAL},itemDisabled:{color:u.ThemeColorMap.TEXT_MUTED},itemEnabled:{color:u.ThemeColorMap.INTERACTIVE_NORMAL}}),m=[1,1.01],w=t.useRef(new ne.Value(m[P(s,e,!1)?1:0])).current,k=()=>ne.spring(w,{toValue:m[1],duration:250,useNativeDriver:!0}).start(),_=()=>ne.spring(w,{toValue:m[0],duration:250,useNativeDriver:!0}).start(),N={transform:[{scale:w}]};return t.createElement(x,{onPress:()=>{P(s,e,!1)?B(s,e,!1):B(s,e,!0),P(s,e,!1)?k():_(),l(P(s,e,!1))},onLongPress:async function(){await C.sendDebugLog([e],{channelId:n,channelName:a},"single","single log in DebugItem Component.")},onPressIn:k,onPressOut:_},t.createElement(ne.View,{style:[N]},t.createElement(d,{key:e,label:e,leading:t.createElement(d.Icon,{style:r.icon,source:o?g.Settings.Toasts.Settings:g.Settings.Toasts.Failed}),trailing:()=>t.createElement(T,null,t.createElement(S,{style:[{padding:10},o?r.itemEnabled:r.itemDisabled]},i[e]))})))};const we=window.enmity.modules.common.Components.General.Animated,Wt=window.enmity.modules.common.Components.General.Easing;var ot=({label:e,content:n,type:a})=>{var i;const o=M.createThemedStyleSheet({button:{width:"92%",borderRadius:10,marginLeft:"4%",marginRight:"4%",...y.shadow},text:{color:"#f2f2f2",textAlign:"left",letterSpacing:.25,padding:10},textHeader:{fontSize:20,fontFamily:u.Fonts.PRIMARY_BOLD},textContent:{fontSize:16,fontFamily:u.Fonts.PRIMARY_NORMAL},image:{width:25,height:25,borderRadius:4,position:"absolute",right:0,margin:10}}),l=t.useRef(new we.Value(1)).current,r=()=>{const k=()=>we.timing(l,{toValue:0,duration:250,useNativeDriver:!0,easing:Wt.sin}).start();V.show({title:"Close Tip?",body:"You can either hide this information box forever, or just hide it until you open this page again.",confirmText:"Hide",cancelText:"Don't show again",onConfirm:()=>{k()},onCancel:async function(){await ye.item({name:e,content:!0,type:"setting"},`storing dialog at ${e} in Dialog component`),k()}})},m={standard:{backgroundColor:"rgba(0, 0, 0, 0.5)",marginTop:20},floating:{position:"absolute",bottom:0,marginBottom:30,backgroundColor:"rgba(0, 0, 0, 0.8)"}},w={transform:[{scale:l}]};return p(s,e,!1)?t.createElement(t.Fragment,null):t.createElement(t.Fragment,null,t.createElement(we.View,{style:w},t.createElement(x,{style:[o.button,(i=m[a])!=null?i:m.standard],onPress:r},t.createElement(T,{style:{width:"100%",flexDirection:"row"}},t.createElement(Oe,{style:o.image,source:{uri:"https://i.imgur.com/rl1ga06.png"}})),t.createElement(S,{style:[o.text,o.textHeader]},e),t.createElement(S,{style:[o.text,o.textContent]},n))))},ve=({component:e})=>{const[n,a]=t.useState(),[i,o]=t.useState();return t.createElement(pt,{onTouchStart:l=>{a(l.nativeEvent.pageX),o(l.nativeEvent.pageY)},onTouchEnd:l=>{n-l.nativeEvent.pageX<-100&&i-l.nativeEvent.pageY<40&&i-l.nativeEvent.pageY>-40&&U.pop()}},e)},ae=({label:e,component:n})=>{const a=M.createThemedStyleSheet({text:{color:u.ThemeColorMap.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:u.Fonts.PRIMARY_BOLD,fontSize:12}});return t.createElement(T,{style:{marginTop:10}},t.createElement(S,{style:[a.text,a.optionText]},e.toUpperCase()),n)};const Kt=Ue("StaticSearchBarContainer");var Xt=({channelId:e,channelName:n})=>{const[a,i]=t.useState([]),[o,l]=t.useState([]);t.useEffect(async function(){i(Object.keys(await C.fetchDebugArguments()))},[]);const r=M.createThemedStyleSheet({button:{width:"90%",height:50,justifyContent:"center",alignItems:"center",backgroundColor:u.ThemeColorMap.HEADER_PRIMARY,borderRadius:10,marginLeft:"5%",marginRight:"5%",marginTop:20},text:{color:y.filterColor(u.ThemeColorMap.HEADER_PRIMARY[0],"#f2f2f2","#121212",.8,"buttons in debug info menu"),textAlign:"center",paddingLeft:10,paddingRight:10,letterSpacing:.25,fontFamily:u.Fonts.PRIMARY_BOLD},buttonText:{fontSize:16},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,...y.shadow}});return t.createElement(t.Fragment,null,t.createElement(Kt,{placeholder:"Search Options",onChangeText:m=>l(m)}),t.createElement(ve,{component:t.createElement(T,{style:{marginBottom:100}},t.createElement(ae,{label:"Options",component:t.createElement(t.Fragment,null,t.createElement(T,{style:r.container},h.mapItem(h.filterItem(a,m=>m.toLowerCase().includes(o)),m=>t.createElement(Ht,{option:m,channelId:e,channelName:n,debugOptions:a}),"list of debug information options"),t.createElement(z,null)))}),t.createElement(x,{style:r.button,onPress:async function(){await C.sendDebugLog(a,{channelId:e,channelName:n},"full","full log in Info Component.")}},t.createElement(S,{style:[r.text,r.buttonText]},"Send All")),t.createElement(x,{style:r.button,onPress:async function(){const m=h.filterItem(a,w=>P(s,w,!1),"filtering chosen debug options");await C.sendDebugLog(m,{channelId:e,channelName:n},"partial","partial log in Info Component.")}},t.createElement(S,{style:[r.text,r.buttonText]},"Send Message")),t.createElement(ot,{label:"Information",content:`You can either tap on each item to toggle it and press "Send Message", or you can long-press on an item to only send that item.

To close this dialog, press on it.`,type:"standard"}))}))};const it=qe.createStackNavigator();var Ee=({name:e="Page",component:n=T}={})=>{const a=M.createThemedStyleSheet({container:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:.5},card:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:u.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},text:{color:u.ThemeColorMap.HEADER_PRIMARY,fontFamily:u.Fonts.PRIMARY_NORMAL,fontSize:16,marginLeft:16,backgroundColor:"transparent"}}),i=({onPress:o,title:l})=>t.createElement(x,{onPress:o},t.createElement(S,{style:a.text},l));return t.createElement(vt.NavigationContainer,null,t.createElement(it.Navigator,{initialRouteName:e,style:a.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:a.card,headerStyle:a.header,headerTitleContainerStyle:{color:u.ThemeColorMap.HEADER_PRIMARY},headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(it.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white",fontFamily:u.Fonts.PRIMARY_NORMAL},headerLeft:()=>t.createElement(i,{title:"Close",onPress:()=>{U.pop()}}),...qe.TransitionPresets.ModalSlideFromBottomIOS}})))},st,rt,lt;const[Jt]=Q(O.byProps("setString")),ct=(e,n)=>({debug:()=>{V.show({title:"Choose extra options",body:'You can customize the information sent with this command. If you do not want to customize the debug log, press "`Ignore`" instead to send the full log.',confirmText:"Customize",cancelText:"Ignore",onConfirm:async function(){const a=()=>t.createElement(Xt,{channelId:e,channelName:n});U.push(Ee,{component:a,name:`${s}: Customize`})},onCancel:async function(){const a=await C.fetchDebugArguments();await C.sendDebugLog(Object.keys(a),{channelId:e,channelName:n},"full","full log in Info Command.")}})},clearStores:async function(){var a;const i=(a=JSON.parse(await L.getItem("dislate_store_state")))!=null?a:[];h.forItem(i,async function(o){o.type==="storage"?await L.removeItem(o.name):B(s,o.name,!1)},"clearing state store"),await L.removeItem("dislate_store_state"),E.open({content:`Cleared all ${s} stores.`,source:g.Settings.Toasts.Settings})},download:()=>{Jt.setString(`${A.download}?${Math.floor(Math.random()*1001)}.js`),y.displayToast("download link","clipboard")}}),Qt=h.mapItem(Object.keys(ct("8008135","placeholder")),e=>({name:I.string(e),displayName:I.string(e),value:e}),"debug options formatted as a command format");var Zt={id:`${(st=s)==null?void 0:st.toLowerCase()}`,name:`${(rt=s)==null?void 0:rt.toLowerCase()}`,displayName:`${(lt=s)==null?void 0:lt.toLowerCase()}`,description:`Choose from a list of options for debugging in ${s}.`,displayDescription:`Choose from a list of options for debugging in ${s}.`,type:ee.Chat,inputType:te.BuiltInText,options:[{name:"type",displayName:"type",description:"The type of command to execute.",displayDescription:"The type of command to execute.",type:X.String,choices:[...Qt],required:!0}],execute:async function(e,n){var a;const i=h.findItem(e,r=>r.name=="type").value,o=ct(n.channel.id,n.channel.name),l=()=>{E.open({content:"Invalid command argument.",source:g.Clock})};return((a=o[i])!=null?a:l)(),{}}};function en(e,n,a,i){window.enmity.clyde.sendReply(e,n,a,i)}const tn=h.mapItem(h.filterItem(Object.keys(F),e=>e!=="detect","filter for everything except for detect"),e=>({name:I.string(e),displayName:I.string(e),value:e}),"language names");var nn={id:"translate",name:"translate",displayName:"translate",description:`Send a message using ${s} in any language chosen, using the Google Translate API.`,displayDescription:`Send a message using ${s} in any language chosen, using the Google Translate API.`,type:ee.Chat,inputType:te.BuiltInText,options:[{name:"text",displayName:"text",description:`The text/message for ${s} to translate. Please note some formatting of mentions and emojis may break due to the API.`,displayDescription:`The text/message for ${s} to translate. Please note some formatting of mentions and emojis may break due to the API.`,type:X.String,required:!0},{name:"language",displayName:"language",description:`The language that ${s} will translate the text into. This can be any language from the list, except "Detect".`,displayDescription:`The language that ${s} will translate the text into. This can be any language from the list, except "Detect".`,type:X.String,choices:[...tn],required:!0}],execute:async function(e,n){const a=h.findItem(e,r=>r.name=="text","translate text").value,i=h.findItem(e,r=>r.name=="language","translate language").value,o=await he.string(a,{fromLang:p(s,"DislateLangFrom","detect"),toLang:i}),l=await he.string(o,{fromLang:p(s,"DislateLangFrom","detect"),toLang:p(s,"DislateLangTo","english")});return!o||!l?(en(n.channel.id,`Failed to send message in #${n.channel.name}`),{}):(V.show({title:"Are you sure?",body:`The message **about to be sent** is:
\`${o}\`

In **${I.string(p(s,"DislateLangTo","english"))}**, this will translate to:
\`${l}\`

${p(s,"DislateBothLangToggle",!1)?`**Note: Sending original and translated**
`:""}Are you sure you want to send this?`,confirmText:"Yeah, send it",cancelText:"Nope, don't send it",onConfirm:()=>{Ye.sendMessage(n.channel.id,{content:p(s,"DislateBothLangToggle",!1)?`${a}

${o}`:o}),E.open({content:`Sent message in #${n.channel.name}, which was translated into ${I.string(i)}.`,source:g.Translate})},onCancel:()=>{E.open({content:"Cancelled translated message request.",source:g.Cancel})}}),{})}};const oe=window.enmity.modules.common.Components.General.Animated;var an=({language:e})=>{const n=t.useRef(new oe.Value(1)).current,a=()=>oe.spring(n,{toValue:1.05,duration:250,useNativeDriver:!0}).start(),i=()=>oe.spring(n,{toValue:1,duration:250,useNativeDriver:!0}).start(),o={transform:[{scale:n}]},l=M.createThemedStyleSheet({container:{width:"95%",marginLeft:"2.5%",borderRadius:10,marginTop:15,backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY}}),r=m=>{B(s,`DislateLang${p(s,"DislateLangFilter")?"To":"From"}`,m),E.open({content:`Set ${F[m].toUpperCase()} as Language to Translate ${p("Dislate","DislateLangFilter")?"to":"from"}.`,source:p(s,"DislateLangFilter")?g.Settings.TranslateTo:g.Settings.TranslateFrom}),U.pop()};return t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,t.createElement(x,{onPress:()=>r(e),onLongPress:()=>r(e),onPressIn:a,onPressOut:i},t.createElement(oe.View,{style:[o,l.container]},t.createElement(d,{label:I.string(e),subLabel:`Aliases: ${F[e]}, ${I.reverse(We,"creating aliases for language names")[F[e]]}`,trailing:d.Arrow,leading:t.createElement(d.Icon,{style:{color:u.ThemeColorMap.INTERACTIVE_NORMAL},source:e==p(s,`DislateLang${p(s,"DislateLangFilter")?"To":"From"}`)?g.Settings.Toasts.Settings:g.Add})})))))};const on=Ue("StaticSearchBarContainer");var mt=()=>{const[e,n]=t.useState([]),[a,i]=t.useState([]);return t.useEffect(()=>{n(Object.keys(F))},[]),t.createElement(t.Fragment,null,t.createElement(on,{placeholder:"Search Language",onChangeText:o=>i(o)}),t.createElement(ve,{component:t.createElement(t.Fragment,null,t.createElement(T,{style:{marginBottom:15}},h.mapItem(h.filterItem(e,o=>o.toLowerCase().includes(a),"getting searched languages"),o=>p(s,"DislateLangFilter")&&o=="detect"?t.createElement(t.Fragment,null):t.createElement(an,{language:o}),"listing different possible languages")))}),t.createElement(ot,{label:"Important",content:`You can either press or long-press on an item to select it as the language to translate ${p(s,"DislateLangFilter")?"to":"from"}. Your current selected language has a \u2713 next to it.

To hide this dialog, press on it.`,type:"floating"}))};const ie=window.enmity.modules.common.Components.General.Animated,[ke,sn]=Q(O.byProps("transitionToGuild"),O.byProps("setString"));var rn=({name:e,version:n,plugin:a,authors:i})=>{const o=M.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...y.shadow},image:{width:75,height:75,borderRadius:10,...y.shadow},mainText:{opacity:.975,letterSpacing:.25},header:{color:u.ThemeColorMap.HEADER_PRIMARY,fontFamily:u.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:u.ThemeColorMap.HEADER_SECONDARY,fontSize:12.75}}),l=t.useRef(new ie.Value(1)).current,r=()=>ie.spring(l,{toValue:1.1,duration:10,useNativeDriver:!0}).start(),m=()=>ie.spring(l,{toValue:1,duration:250,useNativeDriver:!0}).start(),w=()=>ke.openURL(a.repo),k={transform:[{scale:l}]};return t.createElement(t.Fragment,null,t.createElement(T,{style:o.container},t.createElement(x,{onPress:w,onPressIn:r,onPressOut:m},t.createElement(ie.View,{style:k},t.createElement(Oe,{style:[o.image],source:{uri:"https://i.imgur.com/rl1ga06.png"}}))),t.createElement(T,{style:o.textContainer},t.createElement(x,{onPress:()=>ke.openURL(a.repo)},t.createElement(S,{style:[o.mainText,o.header]},e)),t.createElement(T,{style:{flexDirection:"row"}},t.createElement(S,{style:[o.mainText,o.subHeader]},"A project by"),h.mapItem(i,(_,N,J)=>t.createElement(x,{onPress:()=>ke.openURL(_.profile)},t.createElement(S,{style:[o.mainText,o.subHeader,{paddingLeft:4,fontFamily:u.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},_.name,N<J.length-1?",":null)))),t.createElement(T,null,t.createElement(x,{style:{flexDirection:"row"},onPress:async function(){const _=await C.fetchDebugArguments();sn.setString(await C.debugInfo(Object.keys(_))),y.displayToast("debug information","clipboard")}},t.createElement(S,{style:[o.mainText,o.subHeader]},"Version:"),t.createElement(S,{style:[o.mainText,o.subHeader,{paddingLeft:4,fontFamily:u.Fonts.DISPLAY_BOLD}]},n))))))};const[ln,cn]=Q(O.byProps("transitionToGuild"),O.byProps("setString"));var mn=({settings:e,manifest:{name:n,version:a,plugin:i,authors:o,release:l}})=>{const r=M.createThemedStyleSheet({icon:{color:u.ThemeColorMap.INTERACTIVE_NORMAL},item:{color:u.ThemeColorMap.TEXT_MUTED},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,...y.shadow},subheaderText:{color:u.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:u.Fonts.PRIMARY_BOLD,fontSize:14}});return t.createElement(t.Fragment,null,t.createElement(ve,{component:t.createElement(t.Fragment,null,t.createElement(rn,{name:n,version:a,plugin:i,authors:o}),t.createElement(T,{style:{marginTop:20}},t.createElement(ae,{label:"Language",component:t.createElement(t.Fragment,null,t.createElement(T,{style:r.container},t.createElement(d,{label:"Translate From",leading:t.createElement(d.Icon,{style:r.icon,source:g.Settings.TranslateFrom}),trailing:()=>{var m;return t.createElement(S,{style:r.item},(m=I.string(p(n,"DislateLangFrom","detect")))!=null?m:"N/A")},onPress:()=>{B(n,"DislateLangFilter",!1),U.push(Ee,{component:mt,name:`${n}: Language From`})},onLongPress:()=>y.displayToast('Open a new page allowing you to choose a language that you can translate from. The default is "Detect".',"tooltip")}),t.createElement(z,null),t.createElement(d,{label:"Translate To",leading:t.createElement(d.Icon,{style:r.icon,source:g.Settings.TranslateTo}),trailing:()=>{var m;return t.createElement(S,{style:r.item},(m=I.string(p(n,"DislateLangTo","english")))!=null?m:"N/A")},onPress:()=>{B(n,"DislateLangFilter",!0),U.push(Ee,{component:mt,name:`${n}: Language To`})},onLongPress:()=>y.displayToast('Open a new page allowing you to choose a language that you can translate to. The default is "English".',"tooltip")}),t.createElement(z,null),t.createElement(d,{label:"Abbreviate Language",leading:t.createElement(d.Icon,{style:r.icon,source:g.Retry}),subLabel:"Label language in a shorter form when translating (English \u279D EN).",onLongPress:()=>y.displayToast("Convert the full language name to an abbreviation when translating someone else's message. (test [English] \u279D test [EN])","tooltip"),trailing:t.createElement(ue,{value:e.getBoolean("DislateLangAbbr",!1),onValueChange:()=>{e.toggle("DislateLangAbbr",!1),E.open({content:`Successfully ${e.getBoolean("DislateLangAbbr",!1)?"enabled":"disabled"} language abbreviations.`,source:g.Settings.Toasts.Settings})}})}),t.createElement(z,null),t.createElement(d,{label:"Send Original",leading:t.createElement(d.Icon,{style:r.icon,source:g.Settings.Locale}),subLabel:"Send both the Original and Translated message when using /translate.",onLongPress:()=>y.displayToast("When using the /translate command, send both the original message and the translated message at once.","tooltip"),trailing:t.createElement(ue,{value:e.getBoolean("DislateBothLangToggle",!1),onValueChange:()=>{e.toggle("DislateBothLangToggle",!1),E.open({content:`Now sending ${e.getBoolean("DislateBothLangToggle",!1)?"original and translated":"only translated"} message.`,source:g.Settings.Toasts.Settings})}})})))}),t.createElement(ae,{label:"Utility",component:t.createElement(t.Fragment,null,t.createElement(T,{style:r.container},t.createElement(d,{label:"Initialisation Toasts",leading:t.createElement(d.Icon,{style:r.icon,source:g.Settings.Initial}),subLabel:`Toggle initialisation toasts to display loading state of ${n}.`,onLongPress:()=>y.displayToast(`When Enmity is first started, show toasts based on ${n}'s current state (starting, failed, retrying, etc)`,"tooltip"),trailing:t.createElement(ue,{value:e.getBoolean("toastEnable",!1),onValueChange:()=>{e.toggle("toastEnable",!1),E.open({content:`Successfully ${e.getBoolean("toastEnable",!1)?"enabled":"disabled"} Load Toasts.`,source:g.Settings.Toasts.Settings})}})}),t.createElement(z,null),t.createElement(d,{label:"Copy Debug Info",subLabel:`Copy useful debug information like version and build of ${n} to clipboard.`,onLongPress:()=>y.displayToast(`Copy the full debug log to clipboard including ${n}'s Version, Build, and Release, Enmity's Version and Build, etc.`,"tooltip"),leading:t.createElement(d.Icon,{style:r.icon,source:g.Copy}),trailing:d.Arrow,onPress:async function(){const m=await C.fetchDebugArguments();cn.setString(await C.debugInfo(Object.keys(m))),y.displayToast("debug information","clipboard")}}),t.createElement(z,null),t.createElement(d,{label:"Clear Stores",subLabel:`Void most of the settings and stores used throughout ${n} to store data locally.`,onLongPress:()=>y.displayToast(`Clear stores and settings throughout ${n} including the settings to hide popups forever and the list of device codes.`,"tooltip"),leading:t.createElement(d.Icon,{style:r.icon,source:g.Delete}),trailing:d.Arrow,onPress:async function(){var m;const w=(m=JSON.parse(await L.getItem("dislate_store_state")))!=null?m:[];h.forItem(w,async function(k){k.type==="storage"?await L.removeItem(k.name):B(n,k.name,!1)},"clearing state store"),await L.removeItem("dislate_store_state"),E.open({content:`Cleared all ${n} stores.`,source:g.Settings.Toasts.Settings})}})))}),t.createElement(ae,{label:"Source",component:t.createElement(t.Fragment,null,t.createElement(T,{style:r.container},t.createElement(d,{label:"Check for Updates",subLabel:`Search for any ${n} updates and notify you if an update is available.`,onLongPress:()=>y.displayToast(`Search GitHub for any new version or build of ${n} and prompts you to update, and then prompts you to restart Enmity afterwards.`,"tooltip"),leading:t.createElement(d.Icon,{style:r.icon,source:g.Settings.Update}),trailing:d.Arrow,onPress:async function(){await qt.checkForUpdates()}}),t.createElement(z,null),t.createElement(d,{label:"Source",subLabel:`Open the repository of ${n} externally.`,onLongPress:()=>y.displayToast(`Opens the repository of ${n} on GitHub in an external page to view any source code of the plugin.`,"tooltip"),leading:t.createElement(d.Icon,{style:r.icon,source:g.Open}),trailing:d.Arrow,onPress:()=>{ln.openURL(i.repo)}})))})),t.createElement(S,{style:r.subheaderText},`Build: (${i.build.split("-")[1]}) Release: (${l})`))}))};const[gt,gn]=Q(O.byProps("openLazy","hideActionSheet"),O.byProps("getChannel","getDMFromUserId")),se=Et("dislate");var un=(e=>(e[e.Translate=0]="Translate",e[e.Revert=1]="Revert",e))(un||{});let re=[{invalid_id:"acquite sucks"}];const dn={...f,commands:[],patches:[],onStart(){this.commands=[Zt,nn];let e=0;const n=3;async function a(){var i;try{e++;const o=Ve("getMessage","getMessages"),l=Ve("_currentDispatchActionType","_subscriptions","_actionHandlers","_waitQueue");let r=P(f.name,"toastEnable",!1);await Je.isCompatibleDevice();for(const m of["MESSAGE_UPDATE"])try{l==null||l.dispatch({type:m,message:{}})}catch(w){console.log(`[${f.name} Local Error When Waking Up FluxDispatcher ${w}]`)}console.log(`[${f.name}] delayed start attempt ${e}/${n}.`),r&&((i=E)==null||i.open({content:`[${f.name}] start attempt ${e}/${n}.`,source:g.Debug}));try{se.before(gt,"openLazy",(m,[w,k],_)=>{k==="MessageLongPressActionSheet"&&w.then(N=>{se.after(N,"default",(J,H,j)=>{var Se,Te,$e,De,Ie,Le,_e,xe,Ce,Re,Pe,Fe,Ne,Me,Ae,Be,je;const[le,ze]=t.useState(0),[ut,ce]=t.useState(0);if(!(j!=null&&j.props))return console.log(`[${f.name} Local Error: Property "Props" Does not Exist on "res"]`),j;let Y=(Ie=(De=($e=(Te=(Se=j==null?void 0:j.props)==null?void 0:Se.children)==null?void 0:Te.props)==null?void 0:$e.children)==null?void 0:De.props)==null?void 0:Ie.children[1];if(!Y)return console.log(`[${f.name} Local Error: 'finalLocation' seems to be undefined!]`),j;t.useEffect(()=>{h.forItem(Object.values(y.externalPlugins),v=>{h.findItem(Y,D=>{if(D.key!==y.externalPlugins.dislate)return D.key===v},"external plugin list")&&ce(D=>D+1)},"looping through external plugin keys"),h.findItem(Y,v=>{var D;return((D=v.props)==null?void 0:D.message)==="Reply"},"reply button")&&ce(v=>v+1),h.findItem(Y,v=>{var D;return((D=v.props)==null?void 0:D.message)==="Edit Message"},"edit message button")&&ce(v=>v+1)},[]);const R=o.getMessage((_e=(Le=H[0])==null?void 0:Le.message)==null?void 0:_e.channel_id,(Ce=(xe=H[0])==null?void 0:xe.message)==null?void 0:Ce.id);if(!(R!=null&&R.content)&&!((Pe=(Re=H[0])==null?void 0:Re.message)!=null&&Pe.content))return console.log(`[${f.name}] No message content.`),j;const me=(Me=R==null?void 0:R.id)!=null?Me:(Ne=(Fe=H[0])==null?void 0:Fe.message)==null?void 0:Ne.id,dt=(je=R==null?void 0:R.content)!=null?je:(Be=(Ae=H[0])==null?void 0:Ae.message)==null?void 0:Be.content,ge=h.findItem(re,v=>Object.keys(v)[0]===me,"cache object");t.useEffect(()=>{ze(ge?1:0)},ze);const ht=t.createElement(d,{key:y.externalPlugins.dislate,label:`${le===0?"Translate":"Revert"}`,leading:t.createElement(d.Icon,{source:le===0?g.Translate:g.Revert}),onPress:()=>{try{const v=p(f.name,"DislateLangFrom","detect"),D=p(f.name,"DislateLangTo","english"),W=le===0;he.string(R.content,{fromLang:v,toLang:D},!W).then(ft=>{const yt={type:"MESSAGE_UPDATE",message:{...R,content:`${W?ft:ge[me]} ${W?`\`[${P(f.name,"DislateLangAbbr",!1)?F[D].toUpperCase():I.string(D)}]\``:""}`,guild_id:gn.getChannel(R.channel_id).guild_id},log_edit:!1};l.dispatch(yt),E.open({content:W?`Modified message to ${I.string(p(f.name,"DislateLangTo","english"))}.`:"Reverted message back to original state.",source:g.Translate}),W?re.unshift({[me]:dt}):re=h.filterItem(re,bt=>bt!==ge,"cached data override")}),gt.hideActionSheet()}catch(v){console.error(`[${f.name}] Local ${v} At Inner Level`)}}});h.findItem(Y,v=>v.key===y.externalPlugins.dislate,"existing key of dislate")||h.insertItem(Y,ht,ut,"insert translate button")})})})}catch(m){console.error(`[${f.name}] Local ${m} At Intermediate Level`),r&&E.open({content:`[${f.name}] failed to open action sheet.`,source:g.Retry})}}catch(o){console.error(`[${f.name}] Local ${o} At Top Level`);let l=P(f.name,"toastEnable",!1);e<n?(console.warn(`[${f.name}] failed to initialise. Trying again in ${e}0s.`),l&&E.open({content:`[${f.name}] failed to initialise. Trying again in ${e}0s.`,source:g.Retry}),setTimeout(a,e*1e4)):(console.error(`[${f.name}] failed to initialise. Giving up.`),l&&E.open({content:`[${f.name}] failed to initialise. Giving up.`,source:g.Failed}))}}setTimeout(()=>{a(),this.patches.push(se)},500)},onStop(){this.commands=[],this.patches=[],se.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(mn,{settings:e,manifest:{name:f.name,version:f.version,plugin:f.plugin,authors:f.authors,release:f.release}})}};wt(dn);
