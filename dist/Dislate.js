const T=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const e=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const C=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const d=window.enmity.modules.common.Navigation,j=window.enmity.modules.common.NavigationNative,D=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const _=window.enmity.modules.common.StyleSheet,O=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const{components:n}=window.enmity;n.Alert;const $=n.Button;n.FlatList,n.Image,n.ImageBackground,n.KeyboardAvoidingView,n.Modal,n.Pressable,n.RefreshControl;const b=n.ScrollView;n.SectionList,n.StatusBar,n.StyleSheet,n.Switch;const A=n.Text;n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable;const V=n.View;n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;const p=n.FormDivider;n.FormHint,n.FormIcon,n.FormInput,n.FormLabel,n.FormRadio;const i=n.FormRow,k=n.FormSection;n.FormSelect,n.FormSubLabel;const U=n.FormSwitch;n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes;function q(a){window.enmity.plugins.registerPlugin(a)}function r(a){return window.enmity.assets.getIDByName(a)}const c={byProps:(...a)=>window.enmity.modules.filters.byProps(...a),byName:(a,o)=>window.enmity.modules.filters.byName(a,o),byTypeName:(a,o)=>window.enmity.modules.filters.byTypeName(a,o),byDisplayName:(a,o)=>window.enmity.modules.filters.byDisplayName(a,o)};function L(...a){return window.enmity.modules.bulk(...a)}function P(...a){return window.enmity.modules.getByName(...a)}window.enmity.modules.common;function G(a){return window.enmity.patcher.create(a)}var h="Dislate",F="1.3.6",H="Translates text into a desired language.",N="development",Y=[{name:"acquite",id:"581573474296791211"}],K="#ff1f84",X={name:h,version:F,description:H,release:N,authors:Y,color:K};const M=D.createStackNavigator(),{ThemeColorMap:u}=O;var R=({name:a="Page",component:o=V}={})=>{const t=_.createThemedStyleSheet({container:{backgroundColor:u.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:u.BACKGROUND_MOBILE_PRIMARY,color:u.TEXT_NORMAL},header:{backgroundColor:u.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerTitleContainer:{color:u.HEADER_PRIMARY},close:{color:u.HEADER_PRIMARY}});return e.createElement(j.NavigationContainer,null,e.createElement(M.Navigator,{initialRouteName:a,style:t.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:t.cardStyle,headerStyle:t.header,headerTitleContainerStyle:t.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},e.createElement(M.Screen,{name:a,component:o,options:{headerTitleStyle:{color:"white"},headerLeft:()=>e.createElement($,{color:t.close.color,title:"Close",onPress:()=>d.pop()}),...D.TransitionPresets.ModalSlideFromBottomIOS}})))},J={afar:"aa",abkhazian:"ab",afrikaans:"af",akan:"ak",albanian:"sq",amharic:"am",arabic:"ar",aragonese:"an",armenian:"hy",assamese:"as",avaric:"av",avestan:"ae",aymara:"ay",azerbaijani:"az",bashkir:"ba",bambara:"bm",basque:"eu",belarusian:"be",bengali:"bn","bihari languages":"bh",bislama:"bi",tibetan:"bo",bosnian:"bs",breton:"br",bulgarian:"bg",burmese:"my",catalan:"ca",valencian:"ca",czech:"cs",chamorro:"ch",chechen:"ce",chinese:"zh","church slavic":"cu","old slavonic":"cu","church slavonic":"cu","old bulgarian":"cu","old church slavonic":"cu",chuvash:"cv",cornish:"kw",corsican:"co",cree:"cr",welsh:"cy",danish:"da",german:"de",divehi:"dv",dhivehi:"dv",maldivian:"dv",dutch:"nl",flemish:"nl",dzongkha:"dz",greek:"el",english:"en",esperanto:"eo",estonian:"et",ewe:"ee",faroese:"fo",persian:"fa",fijian:"fj",finnish:"fi",french:"fr","western frisian":"fy",fulah:"ff",georgian:"ka",gaelic:"gd","scottish gaelic":"gd",irish:"ga",galician:"gl",manx:"gv",guarani:"gn",gujarati:"gu",haitian:"ht","haitian creole":"ht",hausa:"ha",hebrew:"he",herero:"hz",hindi:"hi","hiri motu":"ho",croatian:"hr",hungarian:"hu",igbo:"ig",icelandic:"is",ido:"io","sichuan yi":"ii",nuosu:"ii",inuktitut:"iu",interlingue:"ie",occidental:"ie",interlingua:"ia",indonesian:"id",inupiaq:"ik",italian:"it",javanese:"jv",japanese:"ja",kalaallisut:"kl",greenlandic:"kl",kannada:"kn",kashmiri:"ks",kanuri:"kr",kazakh:"kk","central khmer":"km",kikuyu:"ki",gikuyu:"ki",kinyarwanda:"rw",kirghiz:"ky",kyrgyz:"ky",komi:"kv",kongo:"kg",korean:"ko",kuanyama:"kj",kwanyama:"kj",kurdish:"ku",lao:"lo",latin:"la",latvian:"lv",limburgan:"li",limburger:"li",limburgish:"li",lingala:"ln",lithuanian:"lt",luxembourgish:"lb",letzeburgesch:"lb","luba-katanga":"lu",ganda:"lg",macedonian:"mk",marshallese:"mh",malayalam:"ml",maori:"mi",marathi:"mr",malay:"ms",malagasy:"mg",maltese:"mt",mongolian:"mn",nauru:"na",navajo:"nv",navaho:"nv","ndebele, south":"nr","south ndebele":"nr","ndebele, north":"nd","north ndebele":"nd",ndonga:"ng",nepali:"ne","norwegian nynorsk":"nn","nynorsk, norwegian":"nn","norwegian bokm\xE5l":"nb","bokm\xE5l, norwegian":"nb",norwegian:"no",chichewa:"ny",chewa:"ny",nyanja:"ny",occitan:"oc",ojibwa:"oj",oriya:"or",oromo:"om",ossetian:"os",ossetic:"os",panjabi:"pa",punjabi:"pa",pali:"pi",polish:"pl",portuguese:"pt",pushto:"ps",pashto:"ps",quechua:"qu",romansh:"rm",romanian:"ro",moldavian:"ro",moldovan:"ro",rundi:"rn",russian:"ru",sango:"sg",sanskrit:"sa",sinhala:"si",sinhalese:"si",slovak:"sk",slovenian:"sl","northern sami":"se",samoan:"sm",shona:"sn",sindhi:"sd",somali:"so","sotho, southern":"st",spanish:"es",castilian:"es",sardinian:"sc",serbian:"sr",swati:"ss",sundanese:"su",swahili:"sw",swedish:"sv",tahitian:"ty",tamil:"ta",tatar:"tt",telugu:"te",tajik:"tg",tagalog:"tl",thai:"th",tigrinya:"ti",tonga:"to",tswana:"tn",tsonga:"ts",turkmen:"tk",turkish:"tr",twi:"tw",uighur:"ug",uyghur:"ug",ukrainian:"uk",urdu:"ur",uzbek:"uz",venda:"ve",vietnamese:"vi",volap\u00FCk:"vo",walloon:"wa",wolof:"wo",xhosa:"xh",yiddish:"yi",yoruba:"yo",zhuang:"za",chuang:"za",zulu:"zu"};function I(a,o,t){window.enmity.settings.set(a,o,t)}function y(a,o,t){return window.enmity.settings.get(a,o,t)}const Q=P("StaticSearchBarContainer");var W=()=>{const[a,o]=e.useState([]),[t,s]=e.useState([]);return e.useEffect(()=>{let l=Object.keys(J);o(l)},[]),e.createElement(e.Fragment,null,e.createElement(Q,{placeholder:"Search Language",onChangeText:l=>s(l)}),e.createElement(b,null,a.filter(l=>l.includes(t)).map(l=>e.createElement(i,{label:l,onPress:()=>{I("Dislate","DislateLangTo",l),d.pop()}}))))};const Z=P("StaticSearchBarContainer");var ee=()=>{const[a,o]=e.useState([]),[t,s]=e.useState([]);return e.useEffect(()=>{o(["deepl","libre","yandex"])},[]),e.createElement(e.Fragment,null,e.createElement(Z,{placeholder:"Search Language",onChangeText:l=>s(l)}),e.createElement(b,null,a.filter(l=>l.includes(t)).map(l=>e.createElement(i,{label:l,onPress:()=>{I("Dislate","DislateLangEngine",l),d.pop()}}))))};const[ne,ae]=L(c.byProps("transitionToGuild"),c.byProps("setString"));var te=({settings:a})=>{const o=r("ic_selection_checked_24px"),t=_.createThemedStyleSheet({icon:{color:T.ThemeColorMap.INTERACTIVE_NORMAL},item:{color:T.ThemeColorMap.TEXT_MUTED}});return e.createElement(e.Fragment,null,e.createElement(b,null,e.createElement(k,{title:"Language Settings"},e.createElement(i,{label:"Current Language",leading:e.createElement(i.Icon,{style:t.icon,source:r("Check")}),trailing:()=>{var s;return e.createElement(A,{style:t.item},(s=y("Dislate","DislateLangTo","japanese"))!=null?s:"N/A")},onPress:()=>{d.push(R,{component:W,name:"Dislate: Language"})}}),e.createElement(p,null),e.createElement(i,{label:"Current Engine",leading:e.createElement(i.Icon,{style:t.icon,source:r("Check")}),trailing:()=>{var s;return e.createElement(A,{style:t.item},(s=y("Dislate","DislateLangEngine","deepl"))!=null?s:"N/A")},onPress:()=>{d.push(R,{component:ee,name:"Dislate: Engines"})}})),e.createElement(p,null),e.createElement(k,{title:"Disable Entire Plugin"},e.createElement(i,{label:"Disable Plugin",leading:e.createElement(i.Icon,{style:t.icon,source:r("ic_rulebook_16px")}),trailing:e.createElement(U,{value:a.getBoolean("masterDisable",!1),onValueChange:()=>{a.toggle("masterDisable",!1),C.open({content:`Successfully ${a.getBoolean("masterDisable",!1)?"disabled":"enabled"} ${h}.`,source:o})}})})),e.createElement(p,null),e.createElement(k,{title:"Source Code"},e.createElement(i,{label:"Download",subLabel:`Copy the link of ${h} to Clipboard`,leading:e.createElement(i.Icon,{style:t.icon,source:r("toast_copy_link")}),trailing:i.Arrow,onPress:()=>{ae.setString("https://raw.githubusercontent.com/acquitelol/dislate/main/dist/Dislate.js"),C.open({content:"Copied to clipboard",source:r("pending-alert")})}}),e.createElement(i,{label:"Source",subLabel:`Open the Repo of ${h} Externally`,leading:e.createElement(i.Icon,{style:t.icon,source:r("ic_leave_stage")}),trailing:i.Arrow,onPress:()=>{ne.openURL("https://github.com/acquitelol/dislate")}})),e.createElement(i,{label:`Plugin Version: ${F}
Release Channel: ${N}`})))};const[re,z,oe,ie,x]=L(c.byProps("setString"),c.byProps("openLazy","hideActionSheet"),c.byProps("getChannel","getDMFromUserId"),c.byProps("getMessage","getMessages"),c.byProps("_currentDispatchActionType","_subscriptions","_actionHandlers","_waitQueue")),v=G("dislate"),le={...X,onStart(){const a=()=>{for(const o of["MESSAGE_UPDATE","MESSAGE_DELETE"])try{x.dispatch({type:o,message:{}})}catch(t){console.log(`[Dislate Local Error ${t}]`)}v.before(z,"openLazy",(o,[t,s],l)=>{s==="MessageLongPressActionSheet"&&t.then(B=>{v.after(B,"default",(se,g,E)=>{var S,f;if(E.props.children.props.children.props.children[1][0].key=="1002")return;const m=ie.getMessage(g[0].message.channel_id,g[0].message.id);if((f=(S=g[0])==null?void 0:S.message)!=null&&f.content){try{if(!g[0].edited_timestamp._isValid)return}catch{}E.props.children.props.children.props.children[1].unshift(e.createElement(i,{key:"1002",label:"Translate",leading:e.createElement(i.Icon,{source:r("img_nitro_star")}),onPress:()=>{try{if(!(m!=null&&m.editedTimestamp)||(m==null?void 0:m.editedTimestamp._isValid)){const w={type:"MESSAGE_UPDATE",message:{...m,edited_timestamp:"invalid_timestamp",content:`${m.content}
[${y("Dislate","DislateLangEngine")}]
[${y("Dislate","DislateLangTo")}]`,guild_id:oe.getChannel(m.channel_id).guild_id},log_edit:!1};x.dispatch(w)}z.hideActionSheet()}catch(w){console.log(`[Dislate Local Error ${w}]`)}}}))}})})})};setTimeout(()=>{a()},300)},onStop(){v.unpatchAll()},getSettingsPanel({settings:a}){return e.createElement(te,{settings:a})}};q(le);
