const{components:t}=window.enmity;t.Alert;const Z=t.Button;t.FlatList,t.Image,t.ImageBackground,t.KeyboardAvoidingView,t.Modal,t.Pressable,t.RefreshControl;const R=t.ScrollView;t.SectionList,t.StatusBar,t.StyleSheet,t.Switch;const $=t.Text;t.TextInput,t.TouchableHighlight,t.TouchableOpacity,t.TouchableWithoutFeedback,t.Touchable;const ee=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox;const S=t.FormDivider;t.FormHint,t.FormIcon,t.FormInput,t.FormLabel,t.FormRadio;const l=t.FormRow,T=t.FormSection;t.FormSelect,t.FormSubLabel;const ne=t.FormSwitch;t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;function ae(e){window.enmity.plugins.registerPlugin(e)}function c(e){return window.enmity.assets.getIDByName(e)}const h={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,o)=>window.enmity.modules.filters.byName(e,o),byTypeName:(e,o)=>window.enmity.modules.filters.byTypeName(e,o),byDisplayName:(e,o)=>window.enmity.modules.filters.byDisplayName(e,o)};function I(...e){return window.enmity.modules.bulk(...e)}function te(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const M=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const i=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const b=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const k=window.enmity.modules.common.Navigation,ie=window.enmity.modules.common.NavigationNative,O=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const B=window.enmity.modules.common.StyleSheet,oe=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function re(e){return window.enmity.patcher.create(e)}var f="Dislate",q="1.0.1",se="Translates text into a desired language.",U="stable",le=[{name:"acquite",id:"581573474296791211"}],ce="#ff1f84",me={name:f,version:q,description:se,release:U,authors:le,color:ce};const V=O.createStackNavigator(),{ThemeColorMap:w}=oe;var G=({name:e="Page",component:o=ee}={})=>{const n=B.createThemedStyleSheet({container:{backgroundColor:w.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:w.BACKGROUND_MOBILE_PRIMARY,color:w.TEXT_NORMAL},header:{backgroundColor:w.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerTitleContainer:{color:w.HEADER_PRIMARY},close:{color:w.HEADER_PRIMARY}});return i.createElement(ie.NavigationContainer,null,i.createElement(V.Navigator,{initialRouteName:e,style:n.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:n.cardStyle,headerStyle:n.header,headerTitleContainerStyle:n.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},i.createElement(V.Screen,{name:e,component:o,options:{headerTitleStyle:{color:"white"},headerLeft:()=>i.createElement(Z,{color:n.close.color,title:"Close",onPress:()=>{k.pop()}}),...O.TransitionPresets.ModalSlideFromBottomIOS}})))},D={afar:"aa",abkhazian:"ab",afrikaans:"af",akan:"ak",albanian:"sq",amharic:"am",arabic:"ar",aragonese:"an",armenian:"hy",assamese:"as",avaric:"av",avestan:"ae",aymara:"ay",azerbaijani:"az",bashkir:"ba",bambara:"bm",basque:"eu",belarusian:"be",bengali:"bn","bihari languages":"bh",bislama:"bi",tibetan:"bo",bosnian:"bs",breton:"br",bulgarian:"bg",burmese:"my",catalan:"ca",valencian:"ca",czech:"cs",chamorro:"ch",chechen:"ce",chinese:"zh","church slavic":"cu","old slavonic":"cu","church slavonic":"cu","old bulgarian":"cu","old church slavonic":"cu",chuvash:"cv",cornish:"kw",corsican:"co",cree:"cr",welsh:"cy",danish:"da",german:"de",divehi:"dv",dhivehi:"dv",maldivian:"dv",dutch:"nl",flemish:"nl",dzongkha:"dz",greek:"el",english:"en",esperanto:"eo",estonian:"et",ewe:"ee",faroese:"fo",persian:"fa",fijian:"fj",finnish:"fi",french:"fr","western frisian":"fy",fulah:"ff",georgian:"ka",gaelic:"gd","scottish gaelic":"gd",irish:"ga",galician:"gl",manx:"gv",guarani:"gn",gujarati:"gu",haitian:"ht","haitian creole":"ht",hausa:"ha",hebrew:"he",herero:"hz",hindi:"hi","hiri motu":"ho",croatian:"hr",hungarian:"hu",igbo:"ig",icelandic:"is",ido:"io","sichuan yi":"ii",nuosu:"ii",inuktitut:"iu",interlingue:"ie",occidental:"ie",interlingua:"ia",indonesian:"id",inupiaq:"ik",italian:"it",javanese:"jv",japanese:"ja",kalaallisut:"kl",greenlandic:"kl",kannada:"kn",kashmiri:"ks",kanuri:"kr",kazakh:"kk","central khmer":"km",kikuyu:"ki",gikuyu:"ki",kinyarwanda:"rw",kirghiz:"ky",kyrgyz:"ky",komi:"kv",kongo:"kg",korean:"ko",kuanyama:"kj",kwanyama:"kj",kurdish:"ku",lao:"lo",latin:"la",latvian:"lv",limburgan:"li",limburger:"li",limburgish:"li",lingala:"ln",lithuanian:"lt",luxembourgish:"lb",letzeburgesch:"lb","luba-katanga":"lu",ganda:"lg",macedonian:"mk",marshallese:"mh",malayalam:"ml",maori:"mi",marathi:"mr",malay:"ms",malagasy:"mg",maltese:"mt",mongolian:"mn",nauru:"na",navajo:"nv",navaho:"nv","ndebele, south":"nr","south ndebele":"nr","ndebele, north":"nd","north ndebele":"nd",ndonga:"ng",nepali:"ne","norwegian nynorsk":"nn","nynorsk, norwegian":"nn","norwegian bokm\xE5l":"nb","bokm\xE5l, norwegian":"nb",norwegian:"no",chichewa:"ny",chewa:"ny",nyanja:"ny",occitan:"oc",ojibwa:"oj",oriya:"or",oromo:"om",ossetian:"os",ossetic:"os",panjabi:"pa",punjabi:"pa",pali:"pi",polish:"pl",portuguese:"pt",pushto:"ps",pashto:"ps",quechua:"qu",romansh:"rm",romanian:"ro",moldavian:"ro",moldovan:"ro",rundi:"rn",russian:"ru",sango:"sg",sanskrit:"sa",sinhala:"si",sinhalese:"si",slovak:"sk",slovenian:"sl","northern sami":"se",samoan:"sm",shona:"sn",sindhi:"sd",somali:"so","sotho, southern":"st",spanish:"es",castilian:"es",sardinian:"sc",serbian:"sr",swati:"ss",sundanese:"su",swahili:"sw",swedish:"sv",tahitian:"ty",tamil:"ta",tatar:"tt",telugu:"te",tajik:"tg",tagalog:"tl",thai:"th",tigrinya:"ti",tonga:"to",tswana:"tn",tsonga:"ts",turkmen:"tk",turkish:"tr",twi:"tw",uighur:"ug",uyghur:"ug",ukrainian:"uk",urdu:"ur",uzbek:"uz",venda:"ve",vietnamese:"vi",volap\u00FCk:"vo",walloon:"wa",wolof:"wo",xhosa:"xh",yiddish:"yi",yoruba:"yo",zhuang:"za",chuang:"za",zulu:"zu"};function v(e,o,n){window.enmity.settings.set(e,o,n)}function d(e,o,n){return window.enmity.settings.get(e,o,n)}const ue=te("StaticSearchBarContainer");var H=()=>{const[e,o]=i.useState([]),[n,r]=i.useState([]);i.useEffect(()=>{let s=Object.keys(D);o(s)},[]);const a=s=>s.charAt(0).toUpperCase()+s.slice(1);return i.createElement(i.Fragment,null,i.createElement(ue,{placeholder:"Search Language",onChangeText:s=>r(s)}),i.createElement(R,null,e.filter(s=>s.includes(n)).map(s=>i.createElement(l,{label:a(s),onPress:()=>{d("Dislate","DislateLangFilter")?v("Dislate","DislateLangTo",s):v("Dislate","DislateLangFrom",s),b.open({content:`Set ${D[s].toUpperCase()} as Language to Translate ${d("Dislate","DislateLangFilter")?"to":"from"}.`,source:d("Dislate","DislateLangFilter")?c("ic_activity_24px"):c("ic_raised_hand")}),k.pop()}}))))};const[de,ge]=I(h.byProps("transitionToGuild"),h.byProps("setString")),Y=e=>e.charAt(0).toUpperCase()+e.slice(1);var he=({settings:e})=>{const o=c("ic_selection_checked_24px"),n=B.createThemedStyleSheet({icon:{color:M.ThemeColorMap.INTERACTIVE_NORMAL},item:{color:M.ThemeColorMap.TEXT_MUTED}});return i.createElement(i.Fragment,null,i.createElement(R,null,i.createElement(T,{title:"Language Settings"},i.createElement(l,{label:"Translate From",leading:i.createElement(l.Icon,{style:n.icon,source:c("ic_raised_hand")}),trailing:()=>{var r;return i.createElement($,{style:n.item},(r=Y(d("Dislate","DislateLangFrom","english")))!=null?r:"N/A")},onPress:()=>{v("Dislate","DislateLangFilter",!1),k.push(G,{component:H,name:"Dislate: Language From"})}}),i.createElement(S,null),i.createElement(l,{label:"Translate To",leading:i.createElement(l.Icon,{style:n.icon,source:c("ic_activity_24px")}),trailing:()=>{var r;return i.createElement($,{style:n.item},(r=Y(d("Dislate","DislateLangTo","japanese")))!=null?r:"N/A")},onPress:()=>{v("Dislate","DislateLangFilter",!0),k.push(G,{component:H,name:"Dislate: Language To"})}})),i.createElement(S,null),i.createElement(T,{title:"Disable Entire Plugin"},i.createElement(l,{label:"Disable Plugin",leading:i.createElement(l.Icon,{style:n.icon,source:c("ic_rulebook_16px")}),trailing:i.createElement(ne,{value:e.getBoolean("masterDisable",!1),onValueChange:()=>{e.toggle("masterDisable",!1),b.open({content:`Successfully ${e.getBoolean("masterDisable",!1)?"disabled":"enabled"} ${f}.`,source:o})}})})),i.createElement(S,null),i.createElement(T,{title:"Source Code"},i.createElement(l,{label:"Download",subLabel:`Copy the link of ${f} to Clipboard`,leading:i.createElement(l.Icon,{style:n.icon,source:c("toast_copy_link")}),trailing:l.Arrow,onPress:()=>{ge.setString("https://raw.githubusercontent.com/acquitelol/dislate/main/dist/Dislate.js"),b.open({content:"Copied to clipboard",source:c("pending-alert")})}}),i.createElement(l,{label:"Source",subLabel:`Open the Repo of ${f} Externally`,leading:i.createElement(l.Icon,{style:n.icon,source:c("ic_leave_stage")}),trailing:l.Arrow,onPress:()=>{de.openURL("https://github.com/acquitelol/dislate")}})),i.createElement(l,{label:`Plugin Version: ${q}
Release Channel: ${U}`})))},ye=["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],we={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cze:"cs",dan:"da",div:"dv",dut:"nl",dzo:"dz",eng:"en",epo:"eo",est:"et",ewe:"ee",fao:"fo",fij:"fj",fin:"fi",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mlg:"mg",mlt:"mt",mon:"mn",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zul:"zu"},_=e=>{if(typeof e!="string")throw new Error(`The "language" must be a string, received ${typeof e}`);if(e.length>100)throw new Error(`The "language" is too long at ${e.length} characters`);if(e=e.toLowerCase(),e=D[e]||we[e]||e,!ye.includes(e))throw new Error(`The language "${e}" is not part of the ISO 639-1`);return e};function K(){var e=Object.create(null);this.put=function(n,r,a,s){if(typeof a!="undefined"&&(typeof a!="number"||isNaN(a)||a<=0))throw new Error("Cache timeout must be a positive number");if(typeof s!="undefined"&&typeof s!="function")throw new Error("Cache timeout callback must be a function");var y=e[n];y&&clearTimeout(y.timeout);var m={value:r,expire:a+Date.now()};return isNaN(m.expire)||(m.timeout=setTimeout(function(){o(n),s&&s(n,r)}.bind(this),a)),e[n]=m,r},this.del=function(n){var r=!0,a=e[n];return a?(clearTimeout(a.timeout),!isNaN(a.expire)&&a.expire<Date.now()&&(r=!1)):r=!1,r&&o(n),r};function o(n){delete e[n]}this.clear=function(){for(var n in e)clearTimeout(e[n].timeout);e=Object.create(null)},this.get=function(n){var r=e[n];if(typeof r!="undefined"){if(isNaN(r.expire)||r.expire>=Date.now())return r.value;delete e[n]}return null}}const C=new K;C.Cache=K;const be="https://translate.googleapis.com/translate_a/single";var ke={fetch:({key:e,from:o,to:n,text:r})=>[`${be}?client=gtx&sl=${o}&tl=${n}&dt=t&q=${encodeURI(r)}`],parse:e=>e.json().then(o=>{if(o=o&&o[0]&&o[0][0]&&o[0].map(n=>n[0]).join(""),!o)throw new Error("Translation not found");return o})},fe={google:ke};if(typeof fetch=="undefined")try{global.fetch=require("node-fetch")}catch{console.warn("Please make sure node-fetch is available")}const p=function(e={}){if(!(this instanceof p))return new p(e);const o={from:"en",to:"ja",cache:void 0,languages:_,engines:fe,engine:"google",keys:{}},n=(r,a={})=>{typeof a=="string"&&(a={to:a}),a.text=r,a.from=_(a.from||n.from),a.to=_(a.to||n.to),a.cache=a.cache||n.cache,a.engines=a.engines||{},a.engine=a.engine||n.engine,a.url=a.url||n.url,a.id=a.id||`${a.url}:${a.from}:${a.to}:${a.engine}:${a.text}`,a.keys=a.keys||n.keys||{};for(let u in n.keys)a.keys[u]=a.keys[u]||n.keys[u];a.key=a.key||n.key||a.keys[a.engine];const s=a.engines[a.engine]||n.engines[a.engine],y=C.get(a.id);if(y)return Promise.resolve(y);if(a.to===a.from)return Promise.resolve(a.text);if(s.needkey&&!a.key)throw new Error(`The engine "${a.engine}" needs a key, please provide it`);const m=s.fetch(a);return fetch(...m).then(s.parse).then(u=>C.put(a.id,u,a.cache))};for(let r in o)n[r]=typeof e[r]=="undefined"?o[r]:e[r];return n},z=new p;z.Translate=p;async function ve(e,o,n){return o?await z(e,{from:o,to:n}):await z(e,n)}const[Te,X,pe,Ee,Q]=I(h.byProps("setString"),h.byProps("openLazy","hideActionSheet"),h.byProps("getChannel","getDMFromUserId"),h.byProps("getMessage","getMessages"),h.byProps("_currentDispatchActionType","_subscriptions","_actionHandlers","_waitQueue")),W=e=>e.charAt(0).toUpperCase()+e.slice(1),L=re("dislate"),Se={...me,onStart(){const e=()=>{for(const o of["MESSAGE_UPDATE"])try{Q.dispatch({type:o,message:{}})}catch(n){console.log(`[Dislate Local Error ${n}]`)}L.before(X,"openLazy",(o,[n,r],a)=>{r==="MessageLongPressActionSheet"&&n.then(s=>{L.after(s,"default",(y,m,u)=>{var j,F,N,A,P;if(!u.props)return console.log('[Dislate Local Error: Property "Props" Does not Exist on "res"]'),u;const x=(P=(A=(N=(F=(j=u==null?void 0:u.props)==null?void 0:j.children)==null?void 0:F.props)==null?void 0:N.children)==null?void 0:A.props)==null?void 0:P.children[1];if(x[0].key=="1002")return;const g=Ee.getMessage(m[0].message.channel_id,m[0].message.id);if(m[0].message.content){try{if(!m[0].edited_timestamp._isValid)return}catch{}x.unshift(i.createElement(l,{key:"1002",label:"Translate",leading:i.createElement(l.Icon,{source:c("img_nitro_star")}),onPress:()=>{try{(!(g!=null&&g.editedTimestamp)||(g==null?void 0:g.editedTimestamp._isValid))&&ve(g.content,d("Dislate","DislateLangFrom","english"),d("Dislate","DislateLangTo","japanese")).then(E=>{const J={type:"MESSAGE_UPDATE",message:{...g,edited_timestamp:"invalid_timestamp",content:`${E} \`[Language: ${W(d("Dislate","DislateLangTo","japanese"))}]\``,guild_id:pe.getChannel(g.channel_id).guild_id},log_edit:!1};Q.dispatch(J),b.open({content:`Modified message to ${W(d("Dislate","DislateLangTo","japanese"))}.`,source:c("img_nitro_star")})}),X.hideActionSheet()}catch(E){console.log(`[Dislate Local Error ${E}]`)}}}))}})})})};setTimeout(()=>{e()},300)},onStop(){L.unpatchAll()},getSettingsPanel({settings:e}){return i.createElement(he,{settings:e})}};ae(Se);
